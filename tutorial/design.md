# 网站设计文档

## 概述

晓柳科技AI原理与应用主题网站 - 静态内容展示平台，采用原生JavaScript实现，支持Markdown内容渲染。

## 一、设计要求

### 1.1 主题定位
- **主题**：AI原理与应用
- **风格**：简洁、专业、响应式
- **品牌**：晓柳科技，紫色渐变主题（#667eea → #764ba2）

### 1.2 核心功能
- 双级导航系统（主导航 + 子菜单）
- 文档标题导航（二级子菜单）
- Markdown内容动态加载与渲染
- 响应式布局（桌面端/移动端）
- 移动端侧滑菜单

## 二、页面布局

### 2.1 整体结构
```
Header (固定顶部)
├─ Logo
└─ 主导航菜单

Main Container
├─ Sidebar (左侧边栏/移动端侧滑)
│  └─ 子菜单（可展开/收缩）
│     └─ 文档标题导航（二级子菜单）
└─ Content Area (内容区)
   └─ Markdown渲染内容
```

### 2.2 响应式断点
- **桌面端**：> 768px - 固定左侧边栏（250px）
- **移动端**：≤ 768px - 侧滑菜单（70%宽度，最大300px）

## 三、导航系统

### 3.1 主导航菜单
配置位于`menu-config.json`，支持动态扩展。

当前菜单结构：
- **LLM原理**：LLM概述、文本的数学表示与编码、注意力机制的原理剖析、Transformer架构深度解析、大规模预训练的原理、生成式推理的数学原理、模型能力涌现的机制
- **AI编程**：提示工程

### 3.2 子菜单
- 根据选中的主导航动态生成
- 支持展开/收缩功能
- 点击加载对应的Markdown文件
- 移动端点击后自动关闭侧边栏
- 活动项显示左侧边框和背景色

### 3.3 文档标题导航（二级子菜单）
- 自动解析Markdown文件中的二级标题（##）
- 作为二级子菜单展示
- 点击可跳转到对应标题位置（锚点跳转）

### 3.4 交互行为
- 点击主导航项 → 加载对应子菜单和默认内容
- 默认选中第一个主导航项和第一个子菜单项
- **移动端**：点击主导航项后直接展示内容，不自动弹出子菜单
- 桌面端活动状态显示底部边框

## 四、内容展示

### 4.1 Markdown渲染
- **库**：marked.js v9.1.6
- **CDN**：https://unpkg.com/marked@9.1.6/marked.min.js
- **支持元素**：标题、段落、列表、代码块、表格、引用、链接、图片

### 4.2 内容加载
- 使用`fetch` API异步加载Markdown文件
- 加载失败显示错误信息
- 文件不存在显示"内容准备中"

### 4.3 数学公式渲染（KaTeX）
- **库**：KaTeX v0.16.9
- **支持语法**：
  - 行内公式：`$E=mc^2$`
  - 块级公式：`$$...$$`
- **特性**：
  - 支持复杂的LaTeX数学公式
  - 正确处理大括号嵌套和转义字符
  - 使用占位符机制防止与Markdown解析冲突
  - 自动转义HTML特殊字符防止XSS攻击

### 4.4 图表渲染（Mermaid）
- **库**：Mermaid v10.6.1
- **支持图表类型**：流程图、时序图、类图、状态图、甘特图、饼图
- **语法**：使用```mermaid代码块包裹图表代码
- **样式**：图表居中显示，带有浅灰色背景和圆角边框

## 五、技术架构

### 5.1 技术栈
- **HTML5**：语义化标签
- **CSS3**：Flexbox布局，媒体查询
- **JavaScript (ES6+)**：原生JS，无框架依赖
- **第三方库**：
  - marked.js v9.1.6（Markdown解析）
  - KaTeX v0.16.9（LaTeX数学公式渲染）
  - Mermaid v10.6.1（图表渲染）

### 5.2 文件结构
```
tutorial/
├── index.html              # 主页面
├── styles.css              # 样式文件
├── js/                     # JavaScript模块目录
├── menu-config.json        # 菜单配置文件
└── content/                # Markdown内容目录
    ├── llm/                # LLM原理内容
    │   ├── intro.md
    │   ├── text-representation.md
    │   ├── attention-mechanism.md
    │   ├── transformer-architecture.md
    │   ├── pretraining.md
    │   ├── generative-inference.md
    │   └── emergence.md
    └── ai-programming/     # AI编程内容
        └── prompt.md
```

### 5.3 菜单配置
菜单通过`menu-config.json`配置，包含：
- `menuConfig`：主导航配置（标题、排序）
- `fileTitleMap`：文件名到标题的映射
- `fileOrder`：文件排序配置

## 六、样式规范

### 6.1 色彩方案
- **主题渐变**：#667eea → #764ba2
- **背景**：#f5f5f5（页面）、#fff（内容区）
- **文字**：#333（主色）、#555（次色）
- **代码**：#e83e8c（行内）、#2d2d2d（代码块背景）

### 6.2 响应式特性
- **过渡动画**：0.3s ease
- **移动端菜单**：侧滑 + 遮罩层
- **浮动按钮**：右下角圆形按钮（仅移动端）

## 七、浏览器兼容性

| 浏览器 | 最低版本 |
|--------|----------|
| Chrome | 90+ |
| Firefox | 88+ |
| Safari | 14+ |
| Edge | 90+ |
| 移动端 | iOS 14+, Android 10+ |

## 八、维护指南

### 8.1 添加新内容
1. 在`content/`对应目录下创建`.md`文件
2. 在`menu-config.json`中添加文件标题映射和排序
3. 刷新页面即可

### 8.2 修改样式
编辑`styles.css`，使用CSS变量便于主题定制。

### 8.3 修改菜单结构
编辑`menu-config.json`调整菜单配置，无需修改JavaScript代码。

## 九、部署

### 9.1 本地开发
```bash
cd tutorial
python -m http.server 3000
```

### 9.2 服务器部署
静态文件部署至Web服务器（Nginx/Apache），配置适当的缓存策略。

## 十、性能优化

### 10.1 CDN优化
- **国内CDN**：使用 bootcdn.net 替代国外CDN，提升国内访问速度
- **预加载策略**：DNS预解析和资源预连接，减少网络延迟
- **资源优先级**：关键CSS和JavaScript优先加载

### 10.2 缓存机制
- **本地存储缓存**：使用 localStorage 实现24小时缓存
- **缓存策略**：
  - 菜单数据缓存：包含文件结构和标题信息
  - 内容缓存：Markdown文件内容缓存
  - 智能过期：自动清理过期缓存
- **缓存验证**：确保缓存数据的有效性和一致性

### 10.3 代码优化
- **统一渲染逻辑**：优化Markdown解析和渲染流程
- **错误处理**：健壮的错误处理机制，确保页面稳定性
- **性能监控**：缓存使用和加载时间监控

### 10.4 代码分割与按需加载
- **模块结构**：
  - `core.js`：核心配置和全局变量
  - `cache.js`：缓存操作和过期管理
  - `menu.js`：菜单数据生成和导航处理
  - `content.js`：内容渲染和Markdown解析
  - `utils.js`：通用工具函数
  - `main.js`：应用入口和模块协调

- **按需加载策略**：
  - 初始加载：core.js + cache.js + main.js
  - 菜单交互时加载：menu.js
  - 内容查看时加载：content.js
  - 工具函数按需加载：utils.js

- **技术实现**：
  - ES6模块系统（`type="module"`）
  - 动态导入（`import()`）
  - 兼容性备选（`nomodule`）

### 10.5 预期性能提升
- **首次加载**：减少30-50%加载时间（CDN优化 + 代码分割）
- **重复访问**：减少70-80%加载时间（缓存机制）
- **用户体验**：更流畅的页面切换和内容浏览

### 10.6 优化效果验证
- 浏览器开发者工具性能分析
- 缓存命中率监控
- 页面加载时间对比测试
- 模块加载状态监控
